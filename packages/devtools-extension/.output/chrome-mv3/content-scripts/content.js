var content=(function(){"use strict";var M=Object.defineProperty;var A=(u,s,i)=>s in u?M(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i;var d=(u,s,i)=>A(u,typeof s!="symbol"?s+"":s,i);var v,w,c,o;function u(e){return e}const i=(w=(v=globalThis.browser)==null?void 0:v.runtime)!=null&&w.id?globalThis.browser:globalThis.chrome;function S(e){return typeof e=="object"&&e!==null&&e.source==="hurum-devtools"&&e.type==="HURUM_ENTRY"}const p={matches:["<all_urls>"],runAt:"document_start",main(){window.addEventListener("message",e=>{e.source===window&&S(e.data)&&i.runtime.sendMessage({type:"HURUM_ENTRY",entry:e.data.entry}).catch(()=>{})})}};function h(e,...t){}const b={debug:(...e)=>h(console.debug,...e),log:(...e)=>h(console.log,...e),warn:(...e)=>h(console.warn,...e),error:(...e)=>h(console.error,...e)};var I=(c=class extends Event{constructor(t,n){super(c.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}},d(c,"EVENT_NAME",m("wxt:locationchange")),c);function m(e){var t;return`${(t=i==null?void 0:i.runtime)==null?void 0:t.id}:content:${e}`}function T(e){let t,n;return{run(){t==null&&(n=new URL(location.href),t=e.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new I(r,n)),n=r)},1e3))}}}var C=(o=class{constructor(t,n){d(this,"isTopFrame",window.self===window.top);d(this,"abortController");d(this,"locationWatcher",T(this));d(this,"receivedMessageIds",new Set);this.contentScriptName=t,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){var t;return((t=i.runtime)==null?void 0:t.id)==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const r=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(t,n){const r=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(t){const n=requestAnimationFrame((...r)=>{this.isValid&&t(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const r=requestIdleCallback((...a)=>{this.signal.aborted||t(...a)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(t,n,r,a){var l;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(l=t.addEventListener)==null||l.call(t,n.startsWith("wxt:")?m(n):n,r,{...a,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),b.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:o.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){var l,E,f;const n=((l=t.data)==null?void 0:l.type)===o.SCRIPT_STARTED_MESSAGE_TYPE,r=((E=t.data)==null?void 0:E.contentScriptName)===this.contentScriptName,a=!this.receivedMessageIds.has((f=t.data)==null?void 0:f.messageId);return n&&r&&a}listenForNewerScripts(t){let n=!0;const r=a=>{if(this.verifyScriptStartedEvent(a)){this.receivedMessageIds.add(a.data.messageId);const l=n;if(n=!1,l&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}},d(o,"SCRIPT_STARTED_MESSAGE_TYPE",m("wxt:content-script-started")),o);function F(){}function g(e,...t){}const N={debug:(...e)=>g(console.debug,...e),log:(...e)=>g(console.log,...e),warn:(...e)=>g(console.warn,...e),error:(...e)=>g(console.error,...e)};return(async()=>{try{const{main:e,...t}=p;return await e(new C("content",t))}catch(e){throw N.error('The content script "content" crashed on startup!',e),e}})()})();
content;